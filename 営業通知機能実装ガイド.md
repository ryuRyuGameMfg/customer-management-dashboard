# 営業通知機能実装ガイド

## 概要
営業するべきクライアントを定期的に通知する仕組みの実装方法をまとめました。

## 実装方法の比較

### 1. Discord Webhook（最も簡単・推奨）
**難易度**: ⭐ 簡単  
**設定時間**: 5分  
**費用**: 無料

**メリット**:
- 設定が最も簡単
- 無料で利用可能
- リアルタイム通知
- チャンネルごとに通知先を分けられる

**デメリット**:
- Discordアカウントが必要

**実装手順**:
1. DiscordサーバーでWebhook URLを取得
2. API Routeを作成して通知を送信
3. 定期実行の仕組みを設定（Vercel Cron、GitHub Actionsなど）

---

### 2. Slack Webhook
**難易度**: ⭐⭐ やや簡単  
**設定時間**: 10分  
**費用**: 無料（基本機能）

**メリット**:
- ビジネスで一般的
- 通知の見た目が整っている
- チャンネルやDMに送信可能

**デメリット**:
- Slackアカウントが必要

**実装手順**:
1. Slack Appを作成してWebhook URLを取得
2. API Routeを作成して通知を送信
3. 定期実行の仕組みを設定

---

### 3. メール通知（Gmail SMTP）
**難易度**: ⭐⭐⭐ 普通  
**設定時間**: 15分  
**費用**: 無料（Gmailを使用する場合）

**メリット**:
- 誰でも使える
- 通知が見逃しにくい
- アプリ不要

**デメリット**:
- Gmailのアプリパスワード設定が必要
- スパムフォルダに入る可能性

**実装手順**:
1. Gmailのアプリパスワードを取得
2. NodeMailerを使用してメール送信APIを作成
3. 定期実行の仕組みを設定

---

### 4. Google Calendar連携
**難易度**: ⭐⭐⭐⭐ やや複雑  
**設定時間**: 30分  
**費用**: 無料

**メリット**:
- カレンダーに自動でイベント追加
- カレンダーアプリから通知を受け取れる
- 他のカレンダーアプリとも連携可能

**デメリット**:
- Google Cloud Platformの設定が必要
- OAuth認証の実装が必要

**実装手順**:
1. Google Cloud Platformでプロジェクト作成
2. Calendar APIを有効化
3. OAuth認証を実装
4. カレンダーイベント作成APIを実装

---

## 定期実行の方法

### 方法1: Vercel Cron Jobs（推奨）
**難易度**: ⭐⭐ やや簡単  
**費用**: 無料（Hobbyプラン）

`vercel.json`に設定を追加するだけ：
```json
{
  "crons": [
    {
      "path": "/api/notifications/check",
      "schedule": "0 9 * * *"
    }
  ]
}
```

### 方法2: GitHub Actions
**難易度**: ⭐⭐ やや簡単  
**費用**: 無料（公開リポジトリ）

`.github/workflows/notifications.yml`を作成：
```yaml
name: Daily Notifications
on:
  schedule:
    - cron: '0 9 * * *'
jobs:
  notify:
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@v2
      - run: curl https://your-app.com/api/notifications/check
```

### 方法3: 外部Cronサービス
**難易度**: ⭐ 簡単  
**費用**: 無料（一部）

- cron-job.org
- EasyCron
- Cronitor

これらのサービスでAPIエンドポイントを定期実行。

---

## 実装の優先順位（推奨）

1. **まず実装**: Discord Webhook + Vercel Cron
   - 最も簡単で確実
   - 5分で設定可能

2. **次に追加**: メール通知
   - より確実に通知を受け取れる
   - スマホにも通知が届く

3. **発展**: Google Calendar連携
   - カレンダー管理も自動化
   - より高度な運用が可能

---

## 通知内容の例

以下のような通知を送信します：

```
【営業アクション通知】

今日対応すべき顧客:
1. 千里敬愛幼稚園 (小谷隆真)
   - アクション: 取引中
   - 実行予定日: 2025/11/17
   - 連絡先: senriki@mu2.so-net.ne.jp

2. 三崎龍人【ぴちぴち株式会社】
   - アクション: フォローアップ
   - 実行予定日: 2025/09/30
   - 連絡先: [メッセージ](https://coconala.com/...)

合計: 2件
```

---

## 次のステップ

詳細な実装コードは `営業通知機能 - 実装例（Discord Webhook）.md` を参照してください。

実装を進めますか？どの方法から始めますか？
